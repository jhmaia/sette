<!doctype html>
<html lang="pt-PT">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Mapa</title>

  <!-- Leaflet -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    crossorigin=""
    defer
  ></script>

  <style>
    html, body {
      height: 100%;
      margin: 0;
    }
    #map {
      width: 100vw;
      height: 100vh;
    }

    .pin {
      display: grid;
      place-items: center;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      background: #fff;
      border: 2px solid #111;
      box-shadow: 0 6px 18px rgba(0,0,0,.25);
      font-size: 16px;
    }

    .pin.primary {
      width: 44px;
      height: 44px;
      border-width: 3px;
      position: relative;
    }

    .pin.primary::after {
      content: "";
      position: absolute;
      inset: -10px;
      border-radius: 50%;
      border: 2px solid rgba(0,0,0,.3);
      animation: pulse 1.8s ease-out infinite;
    }

    @keyframes pulse {
      from { transform: scale(.6); opacity: .9; }
      to   { transform: scale(1.25); opacity: 0; }
    }

    .leaflet-popup-content-wrapper {
      border-radius: 14px;
    }
  </style>
</head>

<body>
  <div id="map"></div>

  <script>
    window.addEventListener("DOMContentLoaded", () => {

      const locations = {
        property: {
          lat: 41.15685,
          lon: -8.66791,
          label: "Avenida Marechal Gomes da Costa, Porto"
        },
        poi1: {
          lat: 41.159097,
          lon: -8.659356,
          label: "Funda√ß√£o de Serralves"
        },
        poi2: {
          lat: 41.151895,
          lon: -8.678260,
          label: "Praia dos Ingleses"
        }
      };

      const map = L.map("map", { zoomControl: true });

      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
        attribution: "&copy; OpenStreetMap"
      }).addTo(map);

      const primaryIcon = L.divIcon({
        html: '<div class="pin primary">üìå</div>',
        className: "",
        iconSize: [44, 44],
        iconAnchor: [22, 22],
        popupAnchor: [0, -18]
      });

      const poiIcon = L.divIcon({
        html: '<div class="pin">üìç</div>',
        className: "",
        iconSize: [34, 34],
        iconAnchor: [17, 17],
        popupAnchor: [0, -14]
      });

      const markers = [
        L.marker([locations.property.lat, locations.property.lon], { icon: primaryIcon })
          .addTo(map)
          .bindPopup("<strong>üìå " + locations.property.label + "</strong>"),

        L.marker([locations.poi1.lat, locations.poi1.lon], { icon: poiIcon })
          .addTo(map)
          .bindPopup("<strong>üìç " + locations.poi1.label + "</strong>"),

        L.marker([locations.poi2.lat, locations.poi2.lon], { icon: poiIcon })
          .addTo(map)
          .bindPopup("<strong>üìç " + locations.poi2.label + "</strong>")
      ];

      const group = L.featureGroup(markers);
      map.fitBounds(group.getBounds().pad(0.25));

      markers[0].openPopup();
    });
  </script>
</body>
</html>
